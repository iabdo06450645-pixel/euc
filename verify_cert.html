<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام التحقق من الشهادات</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f3f4f6;
        }
        .cert-card {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Header -->
    <div class="text-center mb-10">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">التحقق من صحة الشهادات</h1>
        <p class="text-gray-600 text-lg">أدخل رمز الشهادة أدناه للتحقق من تفاصيلها</p>
    </div>

    <!-- Search Box -->
    <div class="w-full max-w-md bg-white p-8 rounded-2xl shadow-xl">
        <div class="relative mb-6">
            <input 
                type="text" 
                id="certId" 
                placeholder="مثال: CERT-101" 
                class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 text-center text-lg transition-colors"
            >
        </div>
        <button 
            onclick="verifyCertificate()" 
            id="verifyBtn"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-all transform active:scale-95 flex items-center justify-center"
        >
            <span>تحقق الآن</span>
            <div id="loader" class="hidden mr-3 w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
        </button>
    </div>

    <!-- Result Display -->
    <div id="resultArea" class="hidden w-full max-w-md mt-8">
        <div id="certDetails" class="cert-card bg-white border-t-4 border-green-500 p-6 rounded-xl shadow-lg">
            <div class="flex justify-between items-start mb-4">
                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-bold">شهادة صالحة</span>
                <svg class="w-12 h-12 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <div class="space-y-4 text-right">
                <div>
                    <p class="text-sm text-gray-500">اسم الطالب</p>
                    <p id="studentName" class="text-xl font-bold text-gray-800"></p>
                </div>
                <div>
                    <p class="text-sm text-gray-500">اسم الدورة / البرنامج</p>
                    <p id="courseName" class="text-lg font-semibold text-gray-700"></p>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <p class="text-sm text-gray-500">تاريخ الإصدار</p>
                        <p id="issueDate" class="font-medium text-gray-700"></p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">التقدير</p>
                        <p id="grade" class="font-medium text-gray-700"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error State -->
        <div id="errorBox" class="hidden bg-red-100 border-r-4 border-red-500 p-4 rounded-lg text-red-700">
            عذراً، لم يتم العثور على شهادة بهذا الرقم. يرجى التأكد من الرمز والمحاولة مرة أخرى.
        </div>
    </div>

    <footer class="mt-20 text-gray-500 text-sm text-center">
        <p>© 2024 نظام التوثيق الرقمي - مدعوم بواسطة GitHub</p>
    </footer>

    <script>
        /**
         * هام جداً:
         * استبدل الرابط أدناه برابط الـ Raw الخاص بملف certificates.json من حسابك على GitHub
         */
        const GITHUB_JSON_URL = 'https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/certificates.json';

        async function verifyCertificate() {
            const certIdInput = document.getElementById('certId').value.trim();
            const resultArea = document.getElementById('resultArea');
            const certDetails = document.getElementById('certDetails');
            const errorBox = document.getElementById('errorBox');
            const loader = document.getElementById('loader');
            const verifyBtn = document.getElementById('verifyBtn');

            if (!certIdInput) {
                alert('الرجاء إدخال رقم الشهادة أولاً');
                return;
            }

            // UI Reset
            resultArea.classList.add('hidden');
            errorBox.classList.add('hidden');
            certDetails.classList.add('hidden');
            loader.classList.remove('hidden');
            verifyBtn.disabled = true;

            try {
                // محاكاة جلب البيانات
                // ملاحظة: إذا كنت تختبر محلياً ولم ترفع الملف بعد، الكود سيفشل في Fetch
                // لذلك سنستخدم محاولة جلب حقيقية مع Catch للبيانات الوهمية للاختبار
                
                let data = [];
                try {
                    const response = await fetch(GITHUB_JSON_URL);
                    if (!response.ok) throw new Error("لا يمكن الوصول للملف");
                    data = await response.json();
                } catch (e) {
                    console.warn("فشل جلب البيانات من GitHub، سيتم استخدام بيانات تجريبية مؤقتاً.");
                    // بيانات تجريبية لغرض العرض فقط حتى تضع رابطك الخاص
                    data = [
                        { "id": "CERT-101", "name": "أحمد محمد علي", "course": "تطوير واجهات المستخدم", "date": "2024-05-15", "grade": "ممتاز" }
                    ];
                }

                // البحث عن الشهادة (تجاهل حالة الأحرف)
                const certificate = data.find(c => c.id.toLowerCase() === certIdInput.toLowerCase());

                // محاكاة تأخير بسيط للتحميل لإظهار الـ Loader
                setTimeout(() => {
                    loader.classList.add('hidden');
                    verifyBtn.disabled = false;
                    resultArea.classList.remove('hidden');

                    if (certificate) {
                        document.getElementById('studentName').innerText = certificate.name;
                        document.getElementById('courseName').innerText = certificate.course;
                        document.getElementById('issueDate').innerText = certificate.date;
                        document.getElementById('grade').innerText = certificate.grade;
                        certDetails.classList.remove('hidden');
                    } else {
                        errorBox.classList.remove('hidden');
                    }
                }, 600);

            } catch (error) {
                console.error('Error:', error);
                alert('حدث خطأ فني أثناء التحقق.');
                loader.classList.add('hidden');
                verifyBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
